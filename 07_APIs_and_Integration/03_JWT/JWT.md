# JWT (JSON Web Token)

## ëª©ì°¨ ðŸ“‘
- [JWT (JSON Web Token)](#jwt-json-web-token)
  - [ëª©ì°¨ ðŸ“‘](#ëª©ì°¨-)
  - [1. JWT ê°œìš”](#1-jwt-ê°œìš”)
    - [1.1 í•µì‹¬ íŠ¹ì§•](#11-í•µì‹¬-íŠ¹ì§•)
  - [2. JWT êµ¬ì¡°ì™€ êµ¬ì„±ìš”ì†Œ](#2-jwt-êµ¬ì¡°ì™€-êµ¬ì„±ìš”ì†Œ)
    - [2.1 Header (í—¤ë”)](#21-header-í—¤ë”)
    - [2.2 Payload (íŽ˜ì´ë¡œë“œ)](#22-payload-íŽ˜ì´ë¡œë“œ)
    - [2.3 Signature (ì„œëª…)](#23-signature-ì„œëª…)
  - [3. JWT ì¸ì¦ í”„ë¡œì„¸ìŠ¤](#3-jwt-ì¸ì¦-í”„ë¡œì„¸ìŠ¤)
    - [3.1 ê¸°ë³¸ ì¸ì¦ íë¦„](#31-ê¸°ë³¸-ì¸ì¦-íë¦„)
  - [4. JWT ìž¥ë‹¨ì  ë¶„ì„](#4-jwt-ìž¥ë‹¨ì -ë¶„ì„)
    - [4.1 ìž¥ì ](#41-ìž¥ì )
    - [4.2 ë‹¨ì ê³¼ ë³´ì™„ì±…](#42-ë‹¨ì ê³¼-ë³´ì™„ì±…)
  - [5. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­](#5-ë³´ì•ˆ-ê³ ë ¤ì‚¬í•­)
  - [6. Best Practices](#6-best-practices)
  - [7. ðŸ”‘ Key Points](#7--key-points)

## 1. JWT ê°œìš”
JWT(JSON Web Token)ëŠ” ë‹¹ì‚¬ìž ê°„ì— ì •ë³´ë¥¼ JSON ê°ì²´ë¡œ ì•ˆì „í•˜ê²Œ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°„ê²°í•˜ê³  ë…ë¦½ì ì¸ ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ê°œë°©í˜• í‘œì¤€(RFC 7519)ìž…ë‹ˆë‹¤.

### 1.1 í•µì‹¬ íŠ¹ì§•
1. **Self-contained**
   - í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ìžì²´ì ìœ¼ë¡œ í¬í•¨
   - ë³„ë„ì˜ ì¡°íšŒ ì—†ì´ í† í° ìžì²´ë¡œ ì •ë³´ ê²€ì¦ ê°€ëŠ¥

2. **Claim ê¸°ë°˜**
   - ì‚¬ìš©ìž ì •ë³´ì™€ ê¶Œí•œ ë“±ì„ í¬í•¨í•˜ëŠ” Claim ë°©ì‹
   - Base64ë¡œ ì¸ì½”ë”©ëœ JSON í˜•íƒœë¡œ ì €ìž¥

## 2. JWT êµ¬ì¡°ì™€ êµ¬ì„±ìš”ì†Œ

### 2.1 Header (í—¤ë”)
```json
{
    "alg": "HS256",
    "typ": "JWT"
}
```
- í† í° ìœ í˜•ê³¼ ì„œëª… ì•Œê³ ë¦¬ì¦˜ ì •ë³´ í¬í•¨
- Base64ë¡œ ì¸ì½”ë”©ë¨

### 2.2 Payload (íŽ˜ì´ë¡œë“œ)
```json
{
    "sub": "12345678",
    "name": "John Doe",
    "iat": 1516239022
}
```
- ì‹¤ì œ ì „ì†¡í•  ë°ì´í„° (Claims)
- ì‚¬ìš©ìž ì •ë³´, ê¶Œí•œ ë“± í¬í•¨
- Base64ë¡œ ì¸ì½”ë”©ë¨

### 2.3 Signature (ì„œëª…)
```javascript
HMACSHA256(
    base64UrlEncode(header) + "." +
    base64UrlEncode(payload),
    secret
)
```
- í† í°ì˜ ë¬´ê²°ì„± ê²€ì¦
- ë¹„ë°€í‚¤ë¥¼ ì‚¬ìš©í•œ í•´ì‹œê°’ ìƒì„±

## 3. JWT ì¸ì¦ í”„ë¡œì„¸ìŠ¤
---------------------------------------------------

### 3.1 ê¸°ë³¸ ì¸ì¦ íë¦„
1. í´ë¼ì´ì–¸íŠ¸ê°€ ë¡œê·¸ì¸ ì •ë³´ ì œì¶œ
2. ì„œë²„ëŠ” ì •ë³´ ê²€ì¦ í›„ JWT ìƒì„±
3. í´ë¼ì´ì–¸íŠ¸ëŠ” JWTë¥¼ ì €ìž¥í•˜ê³  ìš”ì²­ ì‹œ í•¨ê»˜ ì „ì†¡
4. ì„œë²„ëŠ” JWT ê²€ì¦ í›„ ìš”ì²­ ì²˜ë¦¬

## 4. JWT ìž¥ë‹¨ì  ë¶„ì„

### 4.1 ìž¥ì 
1. **ì„œë²„ í™•ìž¥ì„±**
   - ì„œë²„ ë¶€í•˜ ê°ì†Œ
   - ë¶„ì‚°/í´ë¼ìš°ë“œ í™˜ê²½ì— ì í•©

2. **ì¸ì¦ ì €ìž¥ì†Œ ë¶ˆí•„ìš”**
   - ë³„ë„ì˜ ì„¸ì…˜ ì €ìž¥ì†Œ ë¶ˆí•„ìš”
   - ì¸ì¦ ì„œë²„ì™€ DB ì˜ì¡´ë„ ê°ì†Œ

3. **OAuth í˜¸í™˜**
   - Auth0 ë“±ê³¼ ì—°ë™ ê°€ëŠ¥
   - ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„ ìš©ì´

### 4.2 ë‹¨ì ê³¼ ë³´ì™„ì±…
1. **ë³´ì•ˆ ìœ„í—˜**
   - í† í° íƒˆì·¨ ìœ„í—˜ ì¡´ìž¬
   - ì¤‘ìš” ì •ë³´ í¬í•¨ ì œí•œ í•„ìš”

2. **í† í° ê¸¸ì´**
   - ë°ì´í„° ì¦ê°€ì— ë”°ë¥¸ ê¸¸ì´ ì¦ê°€
   - ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ê³ ë ¤ í•„ìš”

3. **í† í° ê´€ë¦¬**
   - ë°œê¸‰ëœ í† í° ìˆ˜ì •/íê¸° ì–´ë ¤ì›€
   - Access Token + Refresh Token ë°©ì‹ìœ¼ë¡œ ë³´ì™„

## 5. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
```java
// JWT ìƒì„± ì˜ˆì‹œ
public String createToken(String username) {
    return JWT.create()
        .withSubject(username)
        .withExpiresAt(new Date(System.currentTimeMillis() + EXPIRATION_TIME))
        .sign(Algorithm.HMAC512(SECRET.getBytes()));
}
```

## 6. Best Practices
1. **í† í° ì €ìž¥**
   - HttpOnly ì¿ í‚¤ ì‚¬ìš©
   - XSS ê³µê²© ë°©ì§€

2. **ë§Œë£Œ ì‹œê°„ ì„¤ì •**
   - ì ì ˆí•œ í† í° ë§Œë£Œ ì‹œê°„ ì„¤ì •
   - Refresh Token í™œìš©

3. **íŽ˜ì´ë¡œë“œ ìµœì†Œí™”**
   - í•„ìš”í•œ ì •ë³´ë§Œ í¬í•¨
   - ë¯¼ê° ì •ë³´ ì œì™¸

## 7. ðŸ”‘ Key Points

> **í•µì‹¬ í¬ì¸íŠ¸**
> - JWTëŠ” Self-contained ë°©ì‹ì˜ í† í° ê¸°ë°˜ ì¸ì¦
> - Header, Payload, Signature 3ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±
> - Base64 ì¸ì½”ë”©ì€ ì•”í˜¸í™”ê°€ ì•„ë‹˜ì„ ì£¼ì˜
> - í† í° ê´€ë¦¬ì™€ ë³´ì•ˆì— ëŒ€í•œ ê³ ë ¤ í•„ìˆ˜
> - Access Tokenê³¼ Refresh Token í™œìš© ê¶Œìž¥